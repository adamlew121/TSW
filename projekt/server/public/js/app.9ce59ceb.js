(function(e){function t(t){for(var n,a,o=t[0],c=t[1],u=t[2],d=0,l=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&l.push(s[a][0]),s[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);f&&f(t);while(l.length)l.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==s[c]&&(n=!1)}n&&(i.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},s={app:0},i=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var f=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"01be":function(e,t,r){},"04f1":function(e,t,r){"use strict";var n=r("6fe9"),s=r.n(n);s.a},1:function(e,t){},"19fc":function(e,t,r){"use strict";var n=r("d694"),s=r.n(n);s.a},2751:function(e,t,r){"use strict";var n=r("df7f"),s=r.n(n);s.a},"2d5e":function(e,t,r){},3143:function(e,t,r){"use strict";var n=r("a59b"),s=r.n(n);s.a},"42e1":function(e,t,r){},"522d":function(e,t,r){},"52af":function(e,t,r){"use strict";var n=r("01be"),s=r.n(n);s.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("a026"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"main-app"}},[r("page-header"),r("router-view")],1)},i=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"navBar"},[r("nav",[e.$store.state.isUserLoggedIn?e._e():r("router-link",{staticClass:"navElem",attrs:{to:"/login"}},[e._v("Login")]),e.$store.state.isUserLoggedIn?e._e():r("router-link",{staticClass:"navElem",attrs:{to:"/register"}},[e._v("Register")]),e.$store.state.isUserLoggedIn?r("router-link",{staticClass:"navElem",attrs:{to:"/historyBidding"}},[e._v("Active-Biddings")]):e._e(),e.$store.state.isUserLoggedIn?r("router-link",{staticClass:"navElem",attrs:{to:"/history"}},[e._v("History")]):e._e(),e.$store.state.isUserLoggedIn?r("router-link",{staticClass:"navElem",attrs:{to:"/chats"}},[e._v("Chats")]):e._e(),r("router-link",{staticClass:"navElem",attrs:{to:"/offers"}},[e._v("Offers")]),e.$store.state.isUserLoggedIn?r("button",{staticClass:"navButton",on:{click:e.logout}},[e._v("Log Out")]):e._e()],1),e.$store.state.isUserLoggedIn?r("div",{staticClass:"userData"},[e._v(" Zalogowany: "+e._s(e.$store.state.user.username)+" ")]):e._e()])},o=[],c={methods:{logout:function(){this.$store.dispatch("setToken",null),this.$store.dispatch("setUser",null),this.$router.push({name:"offers"})}}},u=c,f=(r("6ab1"),r("2877")),d=Object(f["a"])(u,a,o,!1,null,"597e5218",null),l=d.exports,p={name:"App",components:{PageHeader:l}},g=p,h=Object(f["a"])(g,s,i,!1,null,null,null),v=h.exports,m=r("8c4f"),b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-app"},[r("h1",[e._v("Register")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",name:"username",placeholder:"username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),r("br"),r("div",{domProps:{innerHTML:e._s(e.error)}}),r("button",{on:{click:e.register}},[e._v("Register")])])},_=[],w=(r("96cf"),r("1da1")),x=r("bc3a"),k=r.n(x),P=r("2f62"),$=r("0e44");n["a"].use(P["a"]);var O=new P["a"].Store({strict:!0,plugins:[Object($["a"])()],state:{token:null,user:null,isUserLoggedIn:!1},mutations:{setToken:function(e,t){e.token=t,e.isUserLoggedIn=!!t},setUser:function(e,t){e.user=t}},actions:{setToken:function(e,t){var r=e.commit;r("setToken",t)},setUser:function(e,t){var r=e.commit;r("setUser",t)}}}),y=function(){return k.a.create({baseURL:"https://"+window.location.hostname+":8081",headers:{Authorization:"Bearer ".concat(O.state.token)}})},I={register:function(e){return y().post("register",e)},login:function(e){return y().post("login",e)},show:function(e){return y().get("user/".concat(e))}},B={data:function(){return{username:"",password:"",error:""}},methods:{register:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.register({username:e.username,password:e.password});case 3:r=t.sent,console.log(":0"),e.$store.dispatch("setToken",r.data.token),console.log(":1"),e.$store.dispatch("setUser",r.data.user),console.log(":2"),e.$router.push({name:"offers"}),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),e.error=t.t0.response.data.error;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()}},mounted:function(){this.$store.state.isUserLoggedIn&&this.$router.push({name:"offers"})}},S=B,C=(r("3143"),Object(f["a"])(S,b,_,!1,null,"4648ab06",null)),L=C.exports,U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-app"},[r("h1",[e._v("Login")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",name:"username",placeholder:"username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",placeholder:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),r("br"),r("div",{domProps:{innerHTML:e._s(e.error)}}),r("button",{on:{click:e.login}},[e._v("Login")])])},E=[],R={data:function(){return{username:"",password:"",error:""}},methods:{login:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.login({username:e.username,password:e.password});case 3:r=t.sent,e.$store.dispatch("setToken",r.data.token),e.$store.dispatch("setUser",r.data.user),e.$router.push({name:"notifications"}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.error=t.t0.response.data.error;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}},mounted:function(){this.$store.state.isUserLoggedIn&&this.$router.push({name:"notifications"})}},j=R,T=(r("2751"),Object(f["a"])(j,U,E,!1,null,"68aaca50",null)),A=T.exports,N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-app"},[e.canCreateOffer()?r("div",[r("button",{staticClass:"createBtn",on:{click:function(t){return e.navigateTo({name:"offers-create"})}}},[e._v("Create Offer ")])]):e._e(),r("table",{staticClass:"cstTable"},[e._m(0),e._l(e.visibleOffers,(function(t){return r("tr",{key:t.id},[r("td",[e._v(" "+e._s(e.isAuthor(t)?"AUTHOR":"")+" "+e._s(!e.isAuthor(t)&&t.closed?"CLOSED":"")+" "+e._s(e.isAuthor(t)||t.closed?"":"OPEN")+" ")]),r("td",[e._v(e._s(t.title))]),r("td",[e._v(e._s(t.price))]),r("td",[e._v(e._s(e.getOption(t)))]),r("td",[r("button",{on:{click:function(r){return e.navigateTo({name:"offer",params:{offerId:t._id}})}}},[e._v(" View Offer ")])])])}))],2),e.totalPages()>0?r("div",{staticClass:"pagination"},[e.showPreviousLink()?r("span",{staticClass:"pagination-btn",on:{click:function(t){return e.updatePage(e.currentPage-1)}}},[e._v(" < ")]):e._e(),e._v(" "+e._s(e.currentPage+1)+" of "+e._s(e.totalPages())+" "),e.showNextLink()?r("span",{staticClass:"pagination-btn",on:{click:function(t){return e.updatePage(e.currentPage+1)}}},[e._v(" > ")]):e._e()]):e._e()])},z=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("th",[e._v("Status")]),r("th",[e._v("Title")]),r("th",[e._v("Price")]),r("th",[e._v("Option")]),r("th",[e._v("Details")])])}],D=(r("fb6a"),{index:function(){return y().get("offers")},history:function(){return y().get("history")},historyBidding:function(){return y().get("historyBidding")},post:function(e){return y().post("offers",e)},show:function(e){return y().get("offers/".concat(e))},put:function(e){return y().put("offers/".concat(e._id),e)},buy:function(e){return y().put("offers/".concat(e._id,"/buy"),e)},start:function(e){return y().put("offers/".concat(e._id,"/start"),e)},finish:function(e){return y().put("offers/".concat(e._id,"/finish"),e)},bid:function(e){return y().put("offers/".concat(e.offerId,"/bid"),{price:e.price})},indexBids:function(e){return y().get("offers/".concat(e,"/bids"))}}),M={data:function(){return{offers:{},visibleOffers:{},currentPage:0,pageSize:5}},methods:{navigateTo:function(e){this.$router.push(e)},updateVisibleOffers:function(){this.visibleOffers=this.offers.slice(this.currentPage*this.pageSize,this.currentPage*this.pageSize+this.pageSize),0===this.visibleOffers.length&&this.currentPage>0&&this.updatePage(this.currentPage-1)},updatePage:function(e){this.currentPage=e,this.updateVisibleOffers()},totalPages:function(){return Math.ceil(this.offers.length/this.pageSize)},showPreviousLink:function(){return 0!==this.currentPage},showNextLink:function(){return this.currentPage!==this.totalPages()-1},isAuthor:function(e){return this.$store.state.isUserLoggedIn&&e.author===this.$store.state.user._id},canCreateOffer:function(){return this.$store.state.isUserLoggedIn},getOption:function(e){return e.bidding&&1===e.biddingStatus?"Bidding not started":e.bidding||e.closed?e.closed?"Bought":e.bidding&&2===e.biddingStatus?"Bidding in progress":void 0:"Buy now"}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,D.index();case 2:e.offers=t.sent.data,e.updateVisibleOffers();case 4:case"end":return t.stop()}}),t)})))()}},V=M,H=(r("52af"),Object(f["a"])(V,N,z,!1,null,"3911db96",null)),F=H.exports,Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"offer-create"},[r("h3",[e._v("Create offer")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.offer.title,expression:"offer.title"}],attrs:{type:"text",name:"title",placeholder:"Title"},domProps:{value:e.offer.title},on:{input:function(t){t.target.composing||e.$set(e.offer,"title",t.target.value)}}}),r("br"),e._v(" Enable Bidding "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.offer.bidding,expression:"offer.bidding"}],attrs:{type:"checkbox",name:"bidding",placeholder:"Bidding"},domProps:{checked:Array.isArray(e.offer.bidding)?e._i(e.offer.bidding,null)>-1:e.offer.bidding},on:{change:function(t){var r=e.offer.bidding,n=t.target,s=!!n.checked;if(Array.isArray(r)){var i=null,a=e._i(r,i);n.checked?a<0&&e.$set(e.offer,"bidding",r.concat([i])):a>-1&&e.$set(e.offer,"bidding",r.slice(0,a).concat(r.slice(a+1)))}else e.$set(e.offer,"bidding",s)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.offer.price,expression:"offer.price"}],attrs:{type:"number",name:"price",placeholder:"Price"},domProps:{value:e.offer.price},on:{input:function(t){t.target.composing||e.$set(e.offer,"price",t.target.value)}}}),r("br"),r("button",{on:{click:e.create}},[e._v("Post Offer")])])},G=[],J={data:function(){return{offer:{title:null,bidding:!1,price:null,author:null}}},methods:{create:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.offer.author=e.$store.state.user._id,t.next=4,D.post(e.offer);case 4:e.$router.push({name:"offers"}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},mounted:function(){this.$store.state.isUserLoggedIn||this.$router.push({name:"offers"})}},Z=J,q=(r("8996"),Object(f["a"])(Z,Y,G,!1,null,"fc5566fc",null)),K=q.exports,Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"offer-create"},[r("h1",[e._v("Offer Details")]),r("hr"),r("p",[e._v(" Title: "+e._s(e.offer.title)+" ")]),r("p",[e._v(" Price: "+e._s(e.offer.price)+" ")]),r("p",[e._v(" Is bidding enabled: "+e._s(e.offer.bidding)+" ")]),e._v(" Creator: "+e._s(e.author.username)+" "),r("hr"),!e.isAuthor(e.offer)&&e.isLoggedIn()?r("div",[r("button",{on:{click:function(t){return e.navigateTo({name:"chat",params:{userId:e.offer.author}})}}},[e._v(" Chat with creator ")])]):e._e(),r("br"),e.offer.closed?r("div",[e._v(" Already bought ")]):e._e(),e.canEdit?r("div",[r("button",{on:{click:function(t){return e.navigateTo({name:"offer-edit",params:{offerId:e.offer._id}})}}},[e._v(" Edit Offer ")])]):e._e(),e.canBuy?r("div",[r("button",{on:{click:e.buy}},[e._v(" Buy Offer ")])]):e._e(),e.canStartBidding?r("div",[r("button",{on:{click:e.startBid}},[e._v(" Start Bidding ")])]):e._e(),e.canFinishBidding?r("div",[r("button",{on:{click:e.finishBid}},[e._v(" Finish Bidding ")])]):e._e(),e.canEnterBidding?r("div",[r("button",{on:{click:function(t){return e.navigateTo({name:"offer-bidding",params:{offerId:e.offer._id}})}}},[e._v(" Enter Bidding ")])]):e._e()])},W=[],X={data:function(){return{offer:{},author:"",canBuy:!1,canEdit:!1,canStartBidding:!1,canFinishBidding:!1,canEnterBidding:!1}},methods:{navigateTo:function(e){this.$router.push(e)},buy:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.buy(e.offer);case 3:e.offer.closed=!0,e.canBuy=!1,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},startBid:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.start(e.offer);case 3:r=t.sent.data,e.offer=r,e.canStartBidding=!1,e.canFinishBidding=!0,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},finishBid:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.finish(e.offer);case 3:r=t.sent.data,e.offer=r,e.canFinishBidding=!1,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},isAuthor:function(e){return this.$store.state.isUserLoggedIn&&e.author===this.$store.state.user._id},isLoggedIn:function(){return this.$store.state.isUserLoggedIn}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$store.state.route.params.offerId,t.next=3,D.show(r);case 3:return e.offer=t.sent.data,console.log(e.offer),t.next=7,I.show(e.offer.author);case 7:e.author=t.sent.data,e.$store.state.isUserLoggedIn&&(e.offer.author!==e.$store.state.user._id||e.offer.closed||1!==e.offer.biddingStatus?(console.log("cant edit"),e.canEdit=!1):(console.log("can edit"),e.canEdit=!0),e.offer.author!==e.$store.state.user._id||e.offer.closed||!0!==e.offer.bidding||(1===e.offer.biddingStatus&&(e.canStartBidding=!0),2===e.offer.biddingStatus&&(e.canFinishBidding=!0)),e.offer.author===e.$store.state.user._id||e.offer.closed||!0!==e.offer.bidding||2!==e.offer.biddingStatus||(e.canEnterBidding=!0),e.offer.author===e.$store.state.user._id||e.offer.closed||!1!==e.offer.bidding?(console.log("cant buy"),e.canBuy=!1):(console.log("can buy"),e.canBuy=!0));case 9:case"end":return t.stop()}}),t)})))()}},ee=X,te=(r("9db1"),Object(f["a"])(ee,Q,W,!1,null,"61f847ba",null)),re=te.exports,ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"offer-create"},[r("h3",[e._v("Edit offer")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.offer.title,expression:"offer.title"}],attrs:{type:"text",name:"title",placeholder:"Title"},domProps:{value:e.offer.title},on:{input:function(t){t.target.composing||e.$set(e.offer,"title",t.target.value)}}}),r("br"),e._v(" Enable Bidding "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.offer.bidding,expression:"offer.bidding"}],attrs:{type:"checkbox",name:"bidding",placeholder:"Bidding"},domProps:{checked:Array.isArray(e.offer.bidding)?e._i(e.offer.bidding,null)>-1:e.offer.bidding},on:{change:function(t){var r=e.offer.bidding,n=t.target,s=!!n.checked;if(Array.isArray(r)){var i=null,a=e._i(r,i);n.checked?a<0&&e.$set(e.offer,"bidding",r.concat([i])):a>-1&&e.$set(e.offer,"bidding",r.slice(0,a).concat(r.slice(a+1)))}else e.$set(e.offer,"bidding",s)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.offer.price,expression:"offer.price"}],attrs:{type:"number",name:"price",placeholder:"Price"},domProps:{value:e.offer.price},on:{input:function(t){t.target.composing||e.$set(e.offer,"price",t.target.value)}}}),r("br"),r("button",{on:{click:e.save}},[e._v("Save Offer")])])},se=[],ie={data:function(){return{offer:{}}},methods:{save:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.offer.author!==e.$store.state.user._id){t.next=14;break}return t.prev=1,r=e.$store.state.route.params.offerId,console.log("offerId => "+r),t.next=6,D.put(e.offer);case 6:e.$router.push({name:"offer",params:{offerId:r}}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0);case 12:t.next=16;break;case 14:console.log("tylko autor moze editowac"),console.log(e.offer.author+" != "+e.$store.state.user._id);case 16:case"end":return t.stop()}}),t,null,[[1,9]])})))()}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.state.isUserLoggedIn){t.next=4;break}e.$router.push({name:"offers"}),t.next=15;break;case 4:return t.prev=4,r=e.$store.state.route.params.offerId,t.next=8,D.show(r);case 8:e.offer=t.sent.data,console.log(e.offer),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](4),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[4,12]])})))()}},ae=ie,oe=(r("a4ac"),Object(f["a"])(ae,ne,se,!1,null,"488fbd53",null)),ce=oe.exports,ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-app"},[r("table",{staticClass:"cstTable"},[e._m(0),e._l(e.visibleOffers,(function(t){return r("tr",{key:t.id},[r("td",[e._v(" "+e._s(e.isAuthor(t)?"AUTHOR":"")+" "+e._s(!e.isAuthor(t)&&t.closed?"CLOSED":"")+" "+e._s(e.isAuthor(t)||t.closed?"":"OPEN")+" ")]),r("td",[e._v(e._s(t.title))]),r("td",[e._v(e._s(t.price))]),r("td",[e._v(e._s(e.getOption(t)))]),r("td",[r("button",{on:{click:function(r){return e.navigateTo({name:"offer",params:{offerId:t._id}})}}},[e._v(" View Offer ")])])])}))],2),e.totalPages()>0?r("div",{staticClass:"pagination"},[e.showPreviousLink()?r("span",{staticClass:"pagination-btn",on:{click:function(t){return e.updatePage(e.currentPage-1)}}},[e._v(" < ")]):e._e(),e._v(" "+e._s(e.currentPage+1)+" of "+e._s(e.totalPages())+" "),e.showNextLink()?r("span",{staticClass:"pagination-btn",on:{click:function(t){return e.updatePage(e.currentPage+1)}}},[e._v(" > ")]):e._e()]):e._e()])},fe=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("th",[e._v("Status")]),r("th",[e._v("Title")]),r("th",[e._v("Price")]),r("th",[e._v("Option")]),r("th",[e._v("Details")])])}],de={data:function(){return{offers:{},visibleOffers:{},currentPage:0,pageSize:5}},methods:{navigateTo:function(e){this.$router.push(e)},updateVisibleOffers:function(){this.visibleOffers=this.offers.slice(this.currentPage*this.pageSize,this.currentPage*this.pageSize+this.pageSize),0===this.visibleOffers.length&&this.currentPage>0&&this.updatePage(this.currentPage-1)},updatePage:function(e){this.currentPage=e,this.updateVisibleOffers()},totalPages:function(){return Math.ceil(this.offers.length/this.pageSize)},showPreviousLink:function(){return 0!==this.currentPage},showNextLink:function(){return this.currentPage!==this.totalPages()-1},isAuthor:function(e){return this.$store.state.isUserLoggedIn&&e.author===this.$store.state.user._id},getOption:function(e){return e.bidding&&1===e.biddingStatus?"Bidding not started":e.bidding||e.closed?e.closed?"Bought":e.bidding&&2===e.biddingStatus?"Bidding in progress":void 0:"Buy now"}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.state.isUserLoggedIn){t.next=4;break}e.$router.push({name:"offers"}),t.next=9;break;case 4:return t.next=6,D.history();case 6:e.offers=t.sent.data,console.log(e.offers),e.updateVisibleOffers();case 9:case"end":return t.stop()}}),t)})))()}},le=de,pe=(r("04f1"),Object(f["a"])(le,ue,fe,!1,null,"a19ceb20",null)),ge=pe.exports,he=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mid-app"},[r("div",[r("h3",[e._v("Bidding for offer titled: "+e._s(e.offer.title))]),r("h3",[e._v(" Current price: "+e._s(e.offer.price))]),r("hr")]),r("div",[r("table",{staticClass:"mid-table"},e._l(e.bids,(function(t,n){return r("tr",{key:n},[r("td",[e._v(e._s(t.bidderName)+": ")]),r("td",[e._v(" "+e._s(t.price)+" ")])])})),0)]),r("div",[r("form",{on:{submit:function(t){return t.preventDefault(),e.sendMessage(t)}}},[r("div",[r("label",{attrs:{for:"price"}},[e._v("Your Bid:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"price"}],attrs:{type:"number"},domProps:{value:e.price},on:{input:function(t){t.target.composing||(e.price=t.target.value)}}})]),r("button",{staticClass:"btn btn-success",attrs:{disabled:2!==e.offer.biddingStatus,type:"submit"}},[e._v("Send")])])])])},ve=[],me=r("8055"),be=r.n(me),_e={data:function(){return{offer:{},price:"",bids:[],socket:be()("https://"+window.location.hostname+":8081")}},methods:{sendMessage:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.price>e.offer.price)){t.next=15;break}return t.prev=1,t.next=4,D.bid({offerId:e.offer._id,price:e.price});case 4:return e.socket.emit("SEND_BID",{bidderId:e.$store.state.user._id,bidderName:e.$store.state.user.username,price:e.price,offerId:e.offer._id}),t.next=7,D.show(e.offer._id);case 7:r=t.sent.data,e.offer=r,e.price="",t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.state.isUserLoggedIn){t.next=4;break}e.$router.push({name:"offers"}),t.next=19;break;case 4:return t.prev=4,r=e.$store.state.route.params.offerId,t.next=8,D.indexBids(r);case 8:return n=t.sent.data,e.bids=n,t.next=12,D.show(r);case 12:e.offer=t.sent.data,e.socket.on("BID",(function(t){t.offerId===e.offer._id&&e.bids.push(t)})),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](4),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[4,16]])})))()}},we=_e,xe=(r("bc01"),Object(f["a"])(we,he,ve,!1,null,"6f6ec6ad",null)),ke=xe.exports,Pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-app"},[r("table",{staticClass:"cstTable"},[e._m(0),e._l(e.visibleOffers,(function(t){return r("tr",{key:t.id},[r("td",[e._v(" "+e._s(e.isAuthor(t)?"AUTHOR":"")+" "+e._s(!e.isAuthor(t)&&t.closed?"CLOSED":"")+" "+e._s(e.isAuthor(t)||t.closed?"":"OPEN")+" ")]),r("td",[e._v(e._s(t.title))]),r("td",[e._v(e._s(t.price))]),r("td",[e._v(e._s(e.getOption(t)))]),r("td",[r("button",{on:{click:function(r){return e.navigateTo({name:"offer",params:{offerId:t._id}})}}},[e._v(" View Offer ")])]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"price"}],attrs:{type:"number",name:"price",placeholder:"price"},domProps:{value:e.price},on:{input:function(t){t.target.composing||(e.price=t.target.value)}}}),r("button",{on:{click:function(r){return e.dynamicBid(t,e.index)}}},[e._v(" Bid ")])])])}))],2),e.totalPages()>0?r("div",{staticClass:"pagination"},[e.showPreviousLink()?r("span",{staticClass:"pagination-btn",on:{click:function(t){return e.updatePage(e.currentPage-1)}}},[e._v(" < ")]):e._e(),e._v(" "+e._s(e.currentPage+1)+" of "+e._s(e.totalPages())+" "),e.showNextLink()?r("span",{staticClass:"pagination-btn",on:{click:function(t){return e.updatePage(e.currentPage+1)}}},[e._v(" > ")]):e._e()]):e._e()])},$e=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("th",[e._v("Status")]),r("th",[e._v("Title")]),r("th",[e._v("Price")]),r("th",[e._v("Option")]),r("th",[e._v("Details")]),r("th",[e._v("Make new bid")])])}],Oe={data:function(){return{offers:{},visibleOffers:{},price:0,currentPage:0,pageSize:5,socket:be()("https://localhost:8081")}},methods:{navigateTo:function(e){this.$router.push(e)},updateVisibleOffers:function(){this.visibleOffers=this.offers.slice(this.currentPage*this.pageSize,this.currentPage*this.pageSize+this.pageSize),0===this.visibleOffers.length&&this.currentPage>0&&this.updatePage(this.currentPage-1)},updatePage:function(e){this.currentPage=e,this.updateVisibleOffers()},totalPages:function(){return Math.ceil(this.offers.length/this.pageSize)},showPreviousLink:function(){return 0!==this.currentPage},showNextLink:function(){return this.currentPage!==this.totalPages()-1},isAuthor:function(e){return this.$store.state.isUserLoggedIn&&e.author===this.$store.state.user._id},getOption:function(e){return e.bidding&&1===e.biddingStatus?"Bidding not started":e.bidding||e.closed?e.closed?"Bought":e.bidding&&2===e.biddingStatus?"Bidding in progress":void 0:"Buy now"},dynamicBid:function(e,t){var r=this;return Object(w["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(r.price>e.price)){n.next=11;break}return n.prev=1,n.next=4,D.bid({offerId:e._id,price:r.price});case 4:r.socket.emit("SEND_BID",{bidderId:r.$store.state.user._id,bidderName:r.$store.state.user.username,price:r.price,offerId:e._id}),r.offers[t].price=r.price,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.state.isUserLoggedIn){t.next=4;break}e.$router.push({name:"offers"}),t.next=8;break;case 4:return t.next=6,D.historyBidding();case 6:e.offers=t.sent.data,e.updateVisibleOffers();case 8:case"end":return t.stop()}}),t)})))()}},ye=Oe,Ie=(r("74ac"),Object(f["a"])(ye,Pe,$e,!1,null,"07d900fc",null)),Be=Ie.exports,Se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-app"},[r("table",{staticClass:"cstTable"},[e._m(0),e._l(e.visibleUsers,(function(t){return r("tr",{key:t.id},[r("td",[e._v(e._s(t.username))]),r("td",[r("button",{on:{click:function(r){return e.navigateTo({name:"chat",params:{userId:t._id}})}}},[e._v(" View Chat ")])])])}))],2),e.totalPages()>0?r("div",{staticClass:"pagination"},[e.showPreviousLink()?r("span",{staticClass:"pagination-btn",on:{click:function(t){return e.updatePage(e.currentPage-1)}}},[e._v(" < ")]):e._e(),e._v(" "+e._s(e.currentPage+1)+" of "+e._s(e.totalPages())+" "),e.showNextLink()?r("span",{staticClass:"pagination-btn",on:{click:function(t){return e.updatePage(e.currentPage+1)}}},[e._v(" > ")]):e._e()]):e._e()])},Ce=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("th",[e._v("Username")]),r("th",[e._v("Details")])])}],Le={index:function(){return y().get("chats")},show:function(e){return y().get("chats/".concat(e))},post:function(e){return y().post("chats",e)},getNotes:function(){return y().get("notes")}},Ue={data:function(){return{users:{},visibleUsers:{},currentPage:0,pageSize:5}},methods:{navigateTo:function(e){this.$router.push(e)},updateVisibleUsers:function(){this.visibleUsers=this.users.slice(this.currentPage*this.pageSize,this.currentPage*this.pageSize+this.pageSize),0===this.visibleUsers.length&&this.currentPage>0&&this.updatePage(this.currentPage-1)},updatePage:function(e){this.currentPage=e,this.updateVisibleUsers()},totalPages:function(){return Math.ceil(this.users.length/this.pageSize)},showPreviousLink:function(){return 0!==this.currentPage},showNextLink:function(){return this.currentPage!==this.totalPages()-1}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.state.isUserLoggedIn){t.next=4;break}e.$router.push({name:"offers"}),t.next=8;break;case 4:return t.next=6,Le.index();case 6:e.users=t.sent.data,e.updateVisibleUsers();case 8:case"end":return t.stop()}}),t)})))()}},Ee=Ue,Re=(r("19fc"),Object(f["a"])(Ee,Se,Ce,!1,null,"60dafe77",null)),je=Re.exports,Te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mid-app"},[r("div",[r("h3",[e._v("Chat with user: "+e._s(e.receiver.username))]),r("hr"),r("table",{staticClass:"main-table",attrs:{id:"chatbox"}},e._l(e.messages,(function(t,n){return r("tr",{key:n},[r("td",[e._v(" "+e._s(e.formatDate(new Date(t.createdAt)))+", ")]),r("td",[e._v(e._s(t.senderId===e.currentUserId?e.currentUserUserName:e.receiver.username)+": ")]),r("td",[e._v(" "+e._s(t.text)+" ")])])})),0)]),r("div",[r("form",{on:{submit:function(t){return t.preventDefault(),e.sendMessage(t)}}},[r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{type:"text"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}})]),r("button",{attrs:{type:"submit"}},[e._v("Send")])])])])},Ae=[],Ne={data:function(){return{receiver:{},currentUserId:"",currentUserUserName:"",message:"",messages:[],socket:be()("https://"+window.location.hostname+":8081")}},methods:{sendMessage:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.message.length>0)){t.next=16;break}return t.prev=1,r=new Date,t.next=5,Le.post({senderId:e.$store.state.user._id,receiverId:e.receiver._id,text:e.message,createdAt:r});case 5:return e.socket.emit("SEND_MESSAGE",{senderId:e.$store.state.user._id,receiverId:e.receiver._id,text:e.message,createdAt:r}),t.next=8,Le.show(e.receiver._id);case 8:n=t.sent.data,e.messages=n,e.message="",t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))()},formatDate:function(e){return e.getDate()+"/"+e.getMonth()+"/"+e.getFullYear()+" - "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.state.isUserLoggedIn){t.next=4;break}e.$router.push({name:"offers"}),t.next=22;break;case 4:return t.prev=4,r=e.$store.state.route.params.userId,t.next=8,I.show(r);case 8:return n=t.sent.data,e.receiver=n,e.receiverId=n._id,e.currentUserId=e.$store.state.user._id,e.currentUserUserName=e.$store.state.user.username,t.next=15,Le.show(r);case 15:e.messages=t.sent.data,e.socket.on("MESSAGE",(function(t){console.log("got message"),console.log("if (("+t.receiverId+"==="+e.receiverId+"&&"+t.senderId+"==="+e.$store.state.user._id+") || ("+t.receiverId+"==="+e.$store.state.user._id+"&&"+t.senderId+"==="+e.receiverId+"))"),(t.receiverId===e.receiverId&&t.senderId===e.$store.state.user._id||t.receiverId===e.$store.state.user._id&&t.senderId===e.receiverId)&&(console.log("validated message"),e.messages.push(t))})),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](4),console.log(t.t0);case 22:case"end":return t.stop()}}),t,null,[[4,19]])})))()}},ze=Ne,De=(r("cb13"),Object(f["a"])(ze,Te,Ae,!1,null,"0eb2d7b6",null)),Me=De.exports,Ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"noteBox"},[r("p",{staticClass:"noteBoxText"},[e._v("You have "+e._s(e.notes.length)+" new notifications!")]),e._l(e.notes,(function(t){return r("div",{key:t.id,staticClass:"noteBoxText"},[e._v(" "+e._s(t.senderUserName)+" has sent you new message! Check your chats ")])}))],2)},He=[],Fe={data:function(){return{notes:{}}},mounted:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Le.getNotes();case 2:e.notes=t.sent.data;case 3:case"end":return t.stop()}}),t)})))()}},Ye=Fe,Ge=(r("63b9"),Object(f["a"])(Ye,Ve,He,!1,null,"7adc0ffe",null)),Je=Ge.exports;n["a"].use(m["a"]);var Ze=new m["a"]({routes:[{path:"/register",name:"register",component:L},{path:"/login",name:"login",component:A},{path:"/offers",name:"offers",component:F},{path:"/offers/create",name:"offers-create",component:K},{path:"/offers/:offerId",name:"offer",component:re},{path:"/offers/:offerId/edit",name:"offer-edit",component:ce},{path:"/offers/:offerId/bidding",name:"offer-bidding",component:ke},{path:"/history",name:"history",component:ge},{path:"/historyBidding",name:"history-bidding",component:Be},{path:"/chats",name:"chats",component:je},{path:"/chats/:userId",name:"chat",component:Me},{path:"/notifications",name:"notifications",component:Je},{path:"*",redirect:"offers"}]}),qe=r("31bd");n["a"].config.productionTip=!1,Object(qe["sync"])(O,Ze),new n["a"]({el:"#app",router:Ze,store:O,components:{App:v},template:"<App/>"})},6e3:function(e,t,r){},"63b9":function(e,t,r){"use strict";var n=r("6000"),s=r.n(n);s.a},"6ab1":function(e,t,r){"use strict";var n=r("522d"),s=r.n(n);s.a},"6fe9":function(e,t,r){},"74ac":function(e,t,r){"use strict";var n=r("2d5e"),s=r.n(n);s.a},7721:function(e,t,r){},8996:function(e,t,r){"use strict";var n=r("c891"),s=r.n(n);s.a},"9db1":function(e,t,r){"use strict";var n=r("42e1"),s=r.n(n);s.a},a4ac:function(e,t,r){"use strict";var n=r("f824"),s=r.n(n);s.a},a59b:function(e,t,r){},bc01:function(e,t,r){"use strict";var n=r("f42c"),s=r.n(n);s.a},c891:function(e,t,r){},cb13:function(e,t,r){"use strict";var n=r("7721"),s=r.n(n);s.a},d694:function(e,t,r){},df7f:function(e,t,r){},f42c:function(e,t,r){},f824:function(e,t,r){}});
//# sourceMappingURL=app.9ce59ceb.js.map